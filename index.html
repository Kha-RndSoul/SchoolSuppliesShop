<!doctype html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Trang chủ </title>
    <link rel="stylesheet" href="src/main/webapp/assets/css/style-common.css" />

    <style>
        /* Minimal overrides / additions only (rely on style-common.css for main styles) */
        :root{
            --max-width:1200px;
            --text:#111;
            --accent:#0b5ed7;
            --slider-shadow: 0 8px 24px rgba(0,0,0,.12);
        }

        /* Featured products grid (minimal, will reuse common classes where available) */
        .featured { max-width: var(--max-width); margin: 28px auto; padding: 20px 14px; }
        .featured .section-header { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:14px; }
        .products-grid { display:grid; grid-template-columns:repeat(5,1fr); gap:16px; }
        .product-card { background:#fff; border-radius:10px; padding:12px; box-shadow:var(--slider-shadow); display:flex; flex-direction:column; gap:8px; text-align:center; }
        .product-card img { width:100%; height:140px; object-fit:contain; border-radius:8px; background:#fff; padding:8px; }
        .meta .name { font-weight:600; color:var(--text); margin-bottom:6px; }
        .meta .price { color:var(--accent); font-weight:700; }
        .actions { display:flex; gap:8px; margin-top:auto; }
        .actions .btn { flex:1; padding:8px 10px; border-radius:8px; cursor:pointer; text-decoration:none; border:0; }
        .btn--ghost { background:transparent; border:1px solid rgba(0,0,0,.06); }
        @media (max-width:1100px){ .products-grid{ grid-template-columns:repeat(4,1fr); } }
        @media (max-width:800px){ .products-grid{ grid-template-columns:repeat(2,1fr); } }
        @media (max-width:480px){ .products-grid{ grid-template-columns:1fr; } .product-card img{ height:120px; } }

        /* Quick view modal minimal styles */
        .qv-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.5); display:none; z-index:9998; }
        .qv-panel{ position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); width:92%; max-width:900px; background:#fff; border-radius:10px; padding:18px; box-shadow:0 12px 40px rgba(0,0,0,.25); display:none; z-index:9999; }
        .qv-close{ position:absolute; right:12px; top:10px; background:transparent; border:0; font-size:20px; cursor:pointer; }
        .qv-grid{ display:flex; gap:18px; align-items:flex-start; }
        .qv-image{ flex:0 0 40%; display:flex; align-items:center; justify-content:center; }
        .qv-image img{ width:100%; height:220px; object-fit:contain; border-radius:8px; padding:8px; background:#fff; }
        .qv-info{ flex:1; }
        .muted{ color:#666; font-size:14px; }
        @media (max-width:800px){ .qv-grid{ flex-direction:column; } .qv-image img{ height:180px; } }
    </style>
</head>
<body>
<header class="site-header">
    <div class="container">
        <h1>Thiên Long - Đồ dùng học tập</h1>
    </div>
</header>

<main class="hero">
    <div class="slider" id="slider" aria-roledescription="carousel" aria-label="Hero slides">
        <div class="slides" id="slides">
            <section class="slide" style="background-image:url('https://images.unsplash.com/photo-1520975869014-7b99a08b2e9f?auto=format&fit=crop&w=1600&q=60'); background-size:cover;">
                <div class="slide__content">
                    <div class="promo">Ưu đãi mùa tựu trường</div>
                    <h2 class="title">Bút gel Thiên Long - Mượt, bền</h2>
                    <p class="desc">Giảm 15% cho hóa đơn đầu tiên. Viết mượt, khô nhanh.</p>
                    <a class="btn" href="products.html">Mua ngay</a>
                </div>
                <div class="product-img"><img src="https://via.placeholder.com/360x240?text=Bút+Gel" alt="Bút gel Thiên Long"></div>
            </section>

            <section class="slide" style="background-image:url('https://images.unsplash.com/photo-1526406915891-7fed4b2b7c4d?auto=format&fit=crop&w=1600&q=60'); background-size:cover;">
                <div class="slide__content">
                    <div class="promo">Combo tiết kiệm</div>
                    <h2 class="title">Vở kẻ ngang - Bìa cứng</h2>
                    <p class="desc">Mua 2 tặng 1 cho vở 100 trang. Chất giấy tốt, viết không lem.</p>
                    <a class="btn" href="products.html">Mua ngay</a>
                </div>
                <div class="product-img"><img src="https://via.placeholder.com/360x240?text=Vở+Kẻ+Ngang" alt="Vở kẻ ngang"></div>
            </section>

            <section class="slide" style="background-image:url('https://images.unsplash.com/photo-1581091870622-3a3b27a9a0f3?auto=format&fit=crop&w=1600&q=60'); background-size:cover;">
                <div class="slide__content">
                    <div class="promo">Mới</div>
                    <h2 class="title">Hộp bút 12 màu</h2>
                    <p class="desc">Màu sắc tươi sáng, an toàn cho trẻ em.</p>
                    <a class="btn" href="products.html">Mua ngay</a>
                </div>
                <div class="product-img"><img src="https://via.placeholder.com/360x240?text=Bút+Màu" alt="Bút màu"></div>
            </section>

            <section class="slide" style="background-image:url('https://images.unsplash.com/photo-1532012197267-da84d127e765?auto=format&fit=crop&w=1600&q=60'); background-size:cover;">
                <div class="slide__content">
                    <div class="promo">Giá tốt</div>
                    <h2 class="title">Tẩy cao su chất lượng</h2>
                    <p class="desc">Không để lại vết, dễ dùng cho mọi loại giấy.</p>
                    <a class="btn" href="products.html">Mua ngay</a>
                </div>
                <div class="product-img"><img src="https://via.placeholder.com/360x240?text=Tẩy+Cao+Su" alt="Tẩy cao su"></div>
            </section>

            <section class="slide" style="background-image:url('https://images.unsplash.com/photo-1515879218367-8466d910aaa4?auto=format&fit=crop&w=1600&q=60'); background-size:cover;">
                <div class="slide__content">
                    <div class="promo">Hàng bán chạy</div>
                    <h2 class="title">Bút chì HB - Độ bền cao</h2>
                    <p class="desc">Phù hợp làm bài kiểm tra, luyện vẽ cơ bản.</p>
                    <a class="btn" href="products.html">Mua ngay</a>
                </div>
                <div class="product-img"><img src="https://via.placeholder.com/360x240?text=Bút+Chì" alt="Bút chì HB"></div>
            </section>
        </div>

        <button class="nav prev" id="prev" aria-label="Previous slide">‹</button>
        <button class="nav next" id="next" aria-label="Next slide">›</button>
        <div class="dots" id="dots" role="tablist" aria-label="Slide navigation"></div>
    </div>
</main>

<!-- Featured products (5 items) -->
<section class="featured container" aria-labelledby="featured-heading">
    <div class="section-header">
        <h2 id="featured-heading">Danh mục sản phẩm nổi bật</h2>
        <a class="btn btn--ghost" href="products.html">Xem tất cả</a>
    </div>

    <div class="products-grid" id="featured-products">
        <article class="product-card" data-id="p1" data-name="Bút gel Thiên Long" data-price="₫45.000" data-brand="Thiên Long" data-stock="120" data-img="https://via.placeholder.com/360x240?text=Bút+Gel">
            <img src="https://via.placeholder.com/360x240?text=Bút+Gel" alt="Bút gel Thiên Long">
            <div class="meta">
                <div class="name">Bút gel Thiên Long</div>
                <div class="price">₫45.000</div>
            </div>
            <div class="actions">
                <button class="btn add-to-cart">Thêm vào giỏ</button>
                <a class="btn" href="product.html?id=p1">Mua ngay</a>
                <button class="btn btn--ghost quickview">Xem nhanh</button>
            </div>
        </article>

        <article class="product-card" data-id="p2" data-name="Vở kẻ ngang 100tr" data-price="₫30.000" data-brand="Thiên Long" data-stock="80" data-img="https://via.placeholder.com/360x240?text=Vở+Kẻ+Ngang">
            <img src="https://via.placeholder.com/360x240?text=Vở+Kẻ+Ngang" alt="Vở kẻ ngang">
            <div class="meta">
                <div class="name">Vở kẻ ngang 100tr</div>
                <div class="price">₫30.000</div>
            </div>
            <div class="actions">
                <button class="btn add-to-cart">Thêm vào giỏ</button>
                <a class="btn" href="product.html?id=p2">Mua ngay</a>
                <button class="btn btn--ghost quickview">Xem nhanh</button>
            </div>
        </article>

        <article class="product-card" data-id="p3" data-name="Hộp bút 12 màu" data-price="₫85.000" data-brand="Thiên Long" data-stock="50" data-img="https://via.placeholder.com/360x240?text=Bút+Màu">
            <img src="https://via.placeholder.com/360x240?text=Bút+Màu" alt="Hộp bút 12 màu">
            <div class="meta">
                <div class="name">Hộp bút 12 màu</div>
                <div class="price">₫85.000</div>
            </div>
            <div class="actions">
                <button class="btn add-to-cart">Thêm vào giỏ</button>
                <a class="btn" href="product.html?id=p3">Mua ngay</a>
                <button class="btn btn--ghost quickview">Xem nhanh</button>
            </div>
        </article>

        <article class="product-card" data-id="p4" data-name="Tẩy cao su" data-price="₫12.000" data-brand="Thiên Long" data-stock="200" data-img="https://via.placeholder.com/360x240?text=Tẩy+Cao+Su">
            <img src="https://via.placeholder.com/360x240?text=Tẩy+Cao+Su" alt="Tẩy cao su">
            <div class="meta">
                <div class="name">Tẩy cao su</div>
                <div class="price">₫12.000</div>
            </div>
            <div class="actions">
                <button class="btn add-to-cart">Thêm vào giỏ</button>
                <a class="btn" href="product.html?id=p4">Mua ngay</a>
                <button class="btn btn--ghost quickview">Xem nhanh</button>
            </div>
        </article>

        <article class="product-card" data-id="p5" data-name="Bút chì HB" data-price="₫8.000" data-brand="Thiên Long" data-stock="340" data-img="https://via.placeholder.com/360x240?text=Bút+Chì">
            <img src="https://via.placeholder.com/360x240?text=Bút+Chì" alt="Bút chì HB">
            <div class="meta">
                <div class="name">Bút chì HB</div>
                <div class="price">₫8.000</div>
            </div>
            <div class="actions">
                <button class="btn add-to-cart">Thêm vào giỏ</button>
                <a class="btn" href="product.html?id=p5">Mua ngay</a>
                <button class="btn btn--ghost quickview">Xem nhanh</button>
            </div>
        </article>
    </div>
</section>

<!-- Slider script (unchanged) -->
<script>
    (function(){
        const slidesEl = document.getElementById('slides');
        const slides = Array.from(slidesEl.children);
        const prev = document.getElementById('prev');
        const next = document.getElementById('next');
        const dotsEl = document.getElementById('dots');
        let index = 0;
        const interval = 4500;
        let timer = null;

        // create dots
        slides.forEach((_, i) => {
            const d = document.createElement('button');
            d.className = 'dot';
            d.setAttribute('aria-label', 'Go to slide ' + (i+1));
            d.dataset.index = i;
            dotsEl.appendChild(d);
        });
        const dots = Array.from(dotsEl.children);

        function update() {
            slidesEl.style.transform = `translateX(-${index*100}%)`;
            dots.forEach((d,i) => d.classList.toggle('active', i === index));
        }

        function goTo(n) {
            index = (n + slides.length) % slides.length;
            update();
        }

        prev.addEventListener('click', () => { goTo(index - 1); resetAuto(); });
        next.addEventListener('click', () => { goTo(index + 1); resetAuto(); });
        dots.forEach(d => d.addEventListener('click', (e) => { goTo(Number(e.currentTarget.dataset.index)); resetAuto(); }));

        // keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') { goTo(index - 1); resetAuto(); }
            if (e.key === 'ArrowRight') { goTo(index + 1); resetAuto(); }
        });

        function startAuto(){ timer = setInterval(()=> goTo(index + 1), interval); }
        function stopAuto(){ clearInterval(timer); timer = null; }
        function resetAuto(){ stopAuto(); startAuto(); }

        // pause on hover/focus
        const slider = document.getElementById('slider');
        slider.addEventListener('mouseenter', stopAuto);
        slider.addEventListener('mouseleave', startAuto);
        slider.addEventListener('focusin', stopAuto);
        slider.addEventListener('focusout', startAuto);

        // init
        update();
        startAuto();
    })();
</script>

<!-- Quick view modal markup + featured JS -->
<div class="qv-backdrop" id="qv-backdrop"></div>
<div class="qv-panel" id="qv-panel" role="dialog" aria-modal="true" aria-labelledby="qv-title">
    <button class="qv-close" id="qv-close" aria-label="Đóng">✕</button>
    <div class="qv-grid">
        <div class="qv-image">
            <img id="qv-img" src="" alt="">
        </div>
        <div class="qv-info">
            <h3 id="qv-title"></h3>
            <div id="qv-brand" class="muted"></div>
            <div id="qv-price" style="margin:8px 0;font-weight:700;color:var(--accent)"></div>
            <div id="qv-stock" class="muted" style="margin-bottom:12px"></div>
            <div style="display:flex;gap:8px;">
                <button id="qv-add" class="btn">Thêm vào giỏ hàng</button>
                <a id="qv-buy" class="btn" href="#">Mua ngay</a>
            </div>
            <div style="margin-top:12px;"><a id="qv-detail" href="#" class="muted">Xem chi tiết sản phẩm →</a></div>
        </div>
    </div>
</div>

<script>
    (function(){
        // Card Add-to-cart
        document.querySelectorAll('.product-card .add-to-cart').forEach(btn=>{
            btn.addEventListener('click', e=>{
                const card = e.currentTarget.closest('.product-card');
                const id = card.dataset.id;
                e.currentTarget.textContent = 'Đã thêm';
                e.currentTarget.disabled = true;
                console.log('Add to cart:', id);
                // integrate real cart logic here
            });
        });

        // Quick view behavior
        const backdrop = document.getElementById('qv-backdrop');
        const panel = document.getElementById('qv-panel');
        const qvImg = document.getElementById('qv-img');
        const qvTitle = document.getElementById('qv-title');
        const qvBrand = document.getElementById('qv-brand');
        const qvPrice = document.getElementById('qv-price');
        const qvStock = document.getElementById('qv-stock');
        const qvBuy = document.getElementById('qv-buy');
        const qvDetail = document.getElementById('qv-detail');
        const qvAdd = document.getElementById('qv-add');
        const qvClose = document.getElementById('qv-close');

        function openQuickView(card){
            const id = card.dataset.id;
            const name = card.dataset.name || card.querySelector('.name').textContent;
            const price = card.dataset.price || card.querySelector('.price').textContent;
            const brand = card.dataset.brand || '';
            const stock = card.dataset.stock || '0';
            const img = card.dataset.img || card.querySelector('img').src;

            qvImg.src = img; qvImg.alt = name;
            qvTitle.textContent = name;
            qvBrand.textContent = brand ? 'Thương hiệu: ' + brand : '';
            qvPrice.textContent = price;
            qvStock.textContent = 'Tình trạng: ' + (stock ? ('Còn ' + stock) : 'Liên hệ');
            qvBuy.href = 'product.html?id=' + id;
            qvDetail.href = 'product.html?id=' + id;
            qvAdd.disabled = false;
            qvAdd.textContent = 'Thêm vào giỏ hàng';

            backdrop.style.display = 'block';
            panel.style.display = 'block';
        }

        function closeQuickView(){
            backdrop.style.display = 'none';
            panel.style.display = 'none';
        }

        document.querySelectorAll('.product-card .quickview').forEach(btn=>{
            btn.addEventListener('click', e=>{
                openQuickView(e.currentTarget.closest('.product-card'));
            });
        });

        qvClose.addEventListener('click', closeQuickView);
        backdrop.addEventListener('click', closeQuickView);
        document.addEventListener('keydown', e => { if (e.key === 'Escape') closeQuickView(); });

        qvAdd.addEventListener('click', ()=>{
            const id = qvBuy.href.split('id=')[1] || '';
            console.log('Add to cart (quickview):', id);
            qvAdd.textContent = 'Đã thêm';
            qvAdd.disabled = true;
        });
    })();
</script>

</body>
</html>
